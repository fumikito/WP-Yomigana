{"version":3,"sources":["q.js"],"names":["yomiganaManager","s","dom","t","target","editor","selection","onLoad","tinyMCEPopup","tinymce","moveToBookmark","ieBookmark","is","getNode","document","getElementById","value","cite","disabled","focus","onSubmit","citeText","q","createElement","setNode","onDelete","str","innerHTML","isIE","replace"],"mappings":"aAAA,IAAIA,iBACHC,EAAG,KADJC,IAAIF,KACHC,OADqB,KAErBC,OAAK,SAFgBC,GAGrBC,EAAAA,EAAAA,aAHqBC,OAAAC,UAIrBC,EAAAA,IAAQC,aAAAN,IACPO,QAAMD,MACNL,aAAQK,OAAaN,UAArBQ,eAAAF,aAAAH,OAAAM,YAGCR,EAAAD,IAAAU,GAAAT,EAAAF,EAAAY,UAAA,OACDV,EAAAC,OAAAD,EAAAF,EAAAY,WAGCV,EAAAC,SACDU,SAAAC,eAAA,YAAAC,MAAAb,EAAAC,OAAAa,KACAH,SAAKV,eAAO,UAAAc,UAAA,GAGXJ,SAAAC,eAAA,YAAAI,SAGDC,SArBoB,SAAAjB,GAuBrBiB,IAAAA,EAAUN,SAAAC,eAAW,YAAAC,MACpB,GAAAb,EAAAC,OAEAD,EAAAC,OAAKA,KAAOiB,MACX,CADD,IAAAC,EAGKR,SAAAS,cAAA,KACJD,EAAAL,KAAAI,EACAZ,QAAQK,MACRQ,aAASD,OAATf,UAAAI,eAAAF,aAAAH,OAAAM,YAECH,EAAAA,UAAaH,EAAAA,EAAAA,aACbF,EAAAF,EAAAuB,QAAAF,GAEDnB,aAAYmB,SAGbG,SAxCoB,SAAAtB,GA0CrBsB,GAAAA,EAAAA,OAAU,CACT,IAAAC,EAAAvB,EAAAC,OAAAuB,UACGxB,QAAHyB,MACCpB,aAAYJ,OAAOuB,UAAnBjB,eAAAF,aAAAH,OAAAM,YAECH,EAAAA,IAAAA,QAAaH,SAAOC,eAAUI,GAAAA,EAAeF,QAAAA,GAE9CL,aAAM0B","file":"../q.js","sourcesContent":["var yomiganaManager = {\n\ts: null,\n\tdom: null,\n\ttarget: null,\n\tonLoad: function (t){\n\t\tt.s = tinyMCEPopup.editor.selection;\n\t\tt.dom = tinyMCEPopup.dom;\n\t\tif(tinymce.isIE){\n\t\t\ttinyMCEPopup.editor.selection.moveToBookmark(tinyMCEPopup.editor.ieBookmark);\n\t\t}\n\t\t//すでにqタグがつけられている場合はqタグを取得\n\t\tif(t.dom.is(t.s.getNode(), \"q\")){\n\t\t\tt.target = t.s.getNode();\n\t\t}\n\t\t//更新と新規の場合\n\t\tif(t.target){\n\t\t\tdocument.getElementById(\"citeText\").value = t.target.cite;\n\t\t\tdocument.getElementById(\"delete\").disabled = false;\n\t\t}\n\t\t//フォームにフォーカスを当てる\n\t\tdocument.getElementById(\"citeText\").focus();\n\t},\n\t\n\tonSubmit: function(t){\n\t\t//引用文の取得\n\t\tvar citeText = document.getElementById(\"citeText\").value;\n\t\tif(t.target){\n\t\t\t//すでにqタグになっていた場合\n\t\t\tt.target.cite = citeText;\n\t\t}else{\n\t\t\t//ルビ新規作成の場合\n\t\t\tvar q = document.createElement('q');\n\t\t\tq.cite = citeText;\n\t\t\tif(tinymce.isIE){\n\t\t\t\ttinyMCEPopup.editor.selection.moveToBookmark(tinyMCEPopup.editor.ieBookmark);\n\t\t\t}\n\t\t\tq.innerHTML = t.s.getContent();\n\t\t\tt.s.setNode(q);\n\t\t}\n\t\ttinyMCEPopup.close();\n\t},\n\t\n\tonDelete: function(t){\n\t\t//タグを脱がせる\n\t\tif(t.target){\n\t\t\tvar str = t.target.innerHTML;\n\t\t\tif(tinymce.isIE){\n\t\t\t\ttinyMCEPopup.editor.selection.moveToBookmark(tinyMCEPopup.editor.ieBookmark);\n\t\t\t}\n\t\t\tt.dom.replace(document.createTextNode(str), t.target, false);\n\t\t}\n\t\ttinyMCEPopup.close();\n\t}\n};"]}