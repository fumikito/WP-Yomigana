{"version":3,"sources":["q.js"],"names":["yomiganaManager","s","dom","target","onLoad","t","tinyMCEPopup","editor","selection","tinymce","isIE","moveToBookmark","ieBookmark","is","getNode","document","getElementById","value","cite","disabled","focus","onSubmit","citeText","q","createElement","innerHTML","getContent","setNode","close","onDelete","str","replace","createTextNode"],"mappings":"AAAA,GAAIA,kBACHC,EAAG,KACHC,IAAK,KACLC,OAAQ,KACRC,OAAQ,SAAUC,GACjBA,EAAEJ,EAAIK,aAAaC,OAAOC,UAC1BH,EAAEH,IAAMI,aAAaJ,IAClBO,QAAQC,MACVJ,aAAaC,OAAOC,UAAUG,eAAeL,aAAaC,OAAOK,YAG/DP,EAAEH,IAAIW,GAAGR,EAAEJ,EAAEa,UAAW,OAC1BT,EAAEF,OAASE,EAAEJ,EAAEa,WAGbT,EAAEF,SACJY,SAASC,eAAe,YAAYC,MAAQZ,EAAEF,OAAOe,KACrDH,SAASC,eAAe,UAAUG,UAAW,GAG9CJ,SAASC,eAAe,YAAYI,SAGrCC,SAAU,SAAShB,GAElB,GAAIiB,GAAWP,SAASC,eAAe,YAAYC,KACnD,IAAGZ,EAAEF,OAEJE,EAAEF,OAAOe,KAAOI,MACZ,CAEJ,GAAIC,GAAIR,SAASS,cAAc,IAC/BD,GAAEL,KAAOI,EACNb,QAAQC,MACVJ,aAAaC,OAAOC,UAAUG,eAAeL,aAAaC,OAAOK,YAElEW,EAAEE,UAAYpB,EAAEJ,EAAEyB,aAClBrB,EAAEJ,EAAE0B,QAAQJ,GAEbjB,aAAasB,SAGdC,SAAU,SAASxB,GAElB,GAAGA,EAAEF,OAAO,CACX,GAAI2B,GAAMzB,EAAEF,OAAOsB,SAChBhB,SAAQC,MACVJ,aAAaC,OAAOC,UAAUG,eAAeL,aAAaC,OAAOK,YAElEP,EAAEH,IAAI6B,QAAQhB,SAASiB,eAAeF,GAAMzB,EAAEF,QAAQ,GAEvDG,aAAasB","file":"q.js","sourcesContent":["var yomiganaManager = {\n\ts: null,\n\tdom: null,\n\ttarget: null,\n\tonLoad: function (t){\n\t\tt.s = tinyMCEPopup.editor.selection;\n\t\tt.dom = tinyMCEPopup.dom;\n\t\tif(tinymce.isIE){\n\t\t\ttinyMCEPopup.editor.selection.moveToBookmark(tinyMCEPopup.editor.ieBookmark);\n\t\t}\n\t\t//すでにqタグがつけられている場合はqタグを取得\n\t\tif(t.dom.is(t.s.getNode(), \"q\")){\n\t\t\tt.target = t.s.getNode();\n\t\t}\n\t\t//更新と新規の場合\n\t\tif(t.target){\n\t\t\tdocument.getElementById(\"citeText\").value = t.target.cite;\n\t\t\tdocument.getElementById(\"delete\").disabled = false;\n\t\t}\n\t\t//フォームにフォーカスを当てる\n\t\tdocument.getElementById(\"citeText\").focus();\n\t},\n\t\n\tonSubmit: function(t){\n\t\t//引用文の取得\n\t\tvar citeText = document.getElementById(\"citeText\").value;\n\t\tif(t.target){\n\t\t\t//すでにqタグになっていた場合\n\t\t\tt.target.cite = citeText;\n\t\t}else{\n\t\t\t//ルビ新規作成の場合\n\t\t\tvar q = document.createElement('q');\n\t\t\tq.cite = citeText;\n\t\t\tif(tinymce.isIE){\n\t\t\t\ttinyMCEPopup.editor.selection.moveToBookmark(tinyMCEPopup.editor.ieBookmark);\n\t\t\t}\n\t\t\tq.innerHTML = t.s.getContent();\n\t\t\tt.s.setNode(q);\n\t\t}\n\t\ttinyMCEPopup.close();\n\t},\n\t\n\tonDelete: function(t){\n\t\t//タグを脱がせる\n\t\tif(t.target){\n\t\t\tvar str = t.target.innerHTML;\n\t\t\tif(tinymce.isIE){\n\t\t\t\ttinyMCEPopup.editor.selection.moveToBookmark(tinyMCEPopup.editor.ieBookmark);\n\t\t\t}\n\t\t\tt.dom.replace(document.createTextNode(str), t.target, false);\n\t\t}\n\t\ttinyMCEPopup.close();\n\t}\n};"],"sourceRoot":"/source/"}